{% extends "csss/header.html" %}
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% bootstrap_messages %}

{% block content %}
	<h1>Users to add:</h1>
	<form action="/administration/resources/add_users_gdrive" method="post">
		{% csrf_token %}
        <p> if adding multiple users, separate them by a newline </p>
        Gmails: <br><textarea name="users" cols="70" rows="10" required></textarea>
		<br>
        <p>Google Drive Folder/File ID</p>
        <input type="text" name="gdrive_location"><br>
        <input type="submit" value="submit" />
	</form>

    {% if users %}
    <h2>Users to remove:</h2>
    <form action="/administration/resources/remove_users_gdrive" method="post">
		{% csrf_token %}
        <table>
            <tr>
                <th>User's Name</th>
                <th>Gmail</th>
                <th>Google Drive Folder/File ID</th>
                <th>Delete</th>
            </tr>
        {% for user in users %}
            <tr>
                <td>{{user.name}}</td>
                <td>{{user.gmail}}</td>
                <td>{{user.folder}}</td>
                <td><input type="checkbox" name="{{user.id}}" value="delete"></td>
            </tr>
        {% endfor %}
        </table>

		<br><input type="submit" value="submit" />
	</form>
    {% endif %}


    <h2>Folder/File to make publicly available:</h2>
    <form action="/administration/resources/make_folder_public_gdrive" method="post">
		{% csrf_token %}
        <textarea name="users" cols="70" rows="10" required></textarea>
		<br><input type="submit" value="submit" />
	</form>

    {% if public_links %}
    <h2>Public Folder/File to remove:</h2>
    <form action="/administration/resources/remove_public_link_gdrive" method="post">
		{% csrf_token %}
        <table>
            <tr>
                <th>Google Drive Folder/File</th>
                <th>Public Link</th>
                <th>Delete</th>
            </tr>
        {% for public_link in public_links %}
            <tr>
                <td>{{public_link.folder}}</td>
                <td>{{public_link.link}}</td>
                <td><input type="checkbox" name="{{public_link.folder}}" value="delete"></td>
            </tr>
        {% endfor %}
        </table>
		<br><input type="submit" value="submit" />
	</form>
    {% endif %}
{% endblock %}
