{% extends "csss/new_header.html" %}
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% bootstrap_messages %}

{% block content %}
	<h1 class="title">Modify Election</h1>
	<form action="{{URL_ROOT}}elections/create_or_update_json/" method="post" class="form">
		{% csrf_token %}
		<p> You can Beautify the below output with <a href="https://codebeautify.org/jsonviewer" target="_blank">Code Beautify</a><br>

		<textarea name="input_json" cols="80" rows="40" required></textarea></p>
        <input id="clickMe" type="button" value="clickme" onclick="beautify();" />
		<input type="submit" value="submit" />
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
	</form>
    {{ election_dict|json_script:"hello-data" }}
    <script>
        (function () {
            raw_string = document.getElementById('hello-data').textContent
            el = JSON.parse(JSON.parse(raw_string));
            $('textarea').val(JSON.stringify(el,null,'\t'));
        })();
    </script>
    <script>
    function beautify() {
        raw_string = JSON.stringify(document.getElementsByName('input_json')[0].value);
        el = JSON.parse(JSON.parse(raw_string));
        $('textarea').val(JSON.stringify(el,null,'\t'));
    }
    </script>
{% endblock %}
